[package]
name = "assay"
version = "0.0.1"
categories = ["command-line-utilities", "development-tools::testing"]
edition = "2024"
homepage = "https://assay.rs"
keywords = ["verification", "testing", "lua", "kubernetes", "validation"]
license = "MIT"
repository = "https://github.com/developerinlondon/assay"
description = "Lightweight Lua runtime for Kubernetes. Verification, scripting, and web services."

[dependencies]
# Lua scripting engine
mlua = { version = "0.11.6", features = ["lua55", "vendored", "async", "serialize"] }

# HTTP client
reqwest = { version = "0.13.2", features = ["json", "rustls", "query"], default-features = false }

# Async runtime
tokio = { version = "1.49.0", features = ["full"] }

# Serialization
serde = { version = "1.0.228", features = ["derive"] }
serde_json = "1.0.149"
serde_yml = "0.0.12"

# CLI
clap = { version = "4.5.57", features = ["derive"] }

# Error handling
anyhow = "1"

# Logging
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter", "json"] }

# JWT signing (RS256)
jsonwebtoken = { version = "10.3.0", features = ["rust_crypto"] }
zeroize = "1.8.2"

# Base64 encoding/decoding
data-encoding = "2.10.0"

# Embed stdlib .lua files in binary
include_dir = "0.7.4"

# Hashing (SHA2 + SHA3)
digest = "0.10.7"
sha2 = "0.10.9"
sha3 = "0.10.8"

# Secure random
rand = "0.10.0"

# Lightweight regex
regex-lite = "0.1.9"

[dev-dependencies]
tokio-test = "0.4"
wiremock = "0.6.5"

[profile.release]
opt-level = "z" # Optimize for size
lto = true # Link-time optimization
codegen-units = 1 # Single codegen unit for better optimization
strip = true # Strip debug symbols
panic = "abort" # Abort on panic (smaller binary)
